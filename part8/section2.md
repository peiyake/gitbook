# 操作系统考点总结

## 操作系统概念性知识

1. 操作系统定义
2. 操作系统功能
3. 操作系统分类

## 进程管理

1. 什么是前趋图？
  
    前趋图的表示通常使用 '→' 箭头来表示，例如：P1 → P2 。 那么我们将，P1是P2的前驱，P2是P1的后继。 只有当
    P1执行完成之后，P2才能够执行。前趋图是个很重要的考点，所以要能看懂图

2. 进程的组成
   * 程序 （程序描述了进程完成的功能）
   * 数据 （进程运行时所需的资源，这个资源是该进程独有的）
   * 控制块（PCB） PCB是进程存在的唯一标志（操作系统执行进程的时候，会给每个执行的进程维护一个PCB，来记录这个进程的相关信息）
3. 进程的执行
   
   只有当一个进程同时获取到了 **所需的资源** 和 **CPU** 时，这个进程才能执行

4. 进程的状态
   * 三态模型
        - 运行 （进程拥有资源和CPU，处理运行中）
        - 就绪 （进程拥有资源，但没有CPU，处于就绪状态）
        - 阻塞 （进程在等待一个资源的到来，处于阻塞状态）

        - 如图：

            ![三态模型图](./images/santai.png)

   * 五态模型 （相对于三态模型，多了**新建态**和**终止态**）
        - 如图：

            ![五态模型图](./images/wutai.png)
   * 更详细的状态模型
        - 活跃就绪 （进程在主存，并且处于可调度状态）
        - 静止就绪 （进程在辅存，必须先转换为活跃就绪才能被调度）
        - 活跃阻塞 （进程阻塞，但一旦解阻塞立马进入活跃就绪状态）
        - 静止阻塞 （进程阻塞，解阻塞后必须先进入活跃阻塞才能进入活跃就绪状态被调度）
        - 如图：

            ![详细状态变换图](./images/xiangxi.png)

## 进程控制

1. 什么叫进程原语？
   
   由若干条机器指令组成，用于完成特定功能，在执行时不能被分割的原子操作。

2. 同步和互斥的概念
3. PV操作
   * P操作 （S = S - 1，若S >= 0 ,则执行P操作的进程继续执行；如果S < 0 ，则设置该进程为阻塞状态，将其插入阻塞队列）
   * V操作 （S = S + 1，若S > 0，则执行V操作的进程继续执行；如果S <= 0 ，则从阻塞状态唤醒一个进程加入就绪队列，然后执行V操作的进程继续执行）
4. 生产者消费者模型
   * 举个例题说明一下：

        一个生产者和一个消费者，缓冲区中可以存放n件产品，生产者不断生产，消费者不断消费。使用三个信号量S、S1、S2，S是互斥信号量，因为缓冲区是互斥资源。S1用来
        表示是否可以往缓冲区存入产品，S1初始值为n；S2用来表示是否能从缓冲区取出产品。 请给出实现进程的模型。

        ![生产者消费者模型图](./images/pv.png)

5. 进程调度算法
   * 先来先服务
   * 时间片轮换
   * 优先级调度
   * 多级反馈调度
        - 设置多个队列，Q1/Q2/Q3... 优先级 Q1 > Q2 > Q3 > ... 
        - 进程进入内存后，先进入Q1队列，按照FCFS算法调度，进程在Q1队列的时间片执行完之后，再放入Q2队列，同样按照FCFS算法调度。。直道进入最后一个队列后，按照“时间片轮换”算法调度直到结束
        - 仅当较高优先级队列为空时才调度较低优先级队列，如果执行时有新的较高优先级进程进入，则抢占CPU，并执行新的进程，同时将之前的进程重新放入队列尾部
6. 进程优先级的确定？
   * 对于IO型进程，让其进入最高优先级队列，移及时响应需要IO交互的进程，但是通常时间片都很小
   * 对于计算型进程，每次执行完时间片后进入低优先级队列，最终采用最大时间片来执行，减少调度
   * 对于IO次数不多，主要是CPU处理的进程，再IO执行完之后，返回优先IO请求时离开的队列。
   * 
7. 死锁
   * 死锁产生的必要条件
        - 互斥条件
        - 请求保持条件
        - 不可剥夺条件
        - 环路条件
8. 线程
   * 可拥有资源的独立单位
   * 可独立调度和分配的基本单位

## 存储管理

### 分页存储管理

1. 分页概念
   * 分页地址结构，如图

    ![分页地址结构](./images/fenyejiegou.png)

        - 页号
        - 页内地址： 通常我们说某个系统页面大小是4k的话，那么就是说页内地址的长度是4k
   * 页表： 实现从页号到物理块号的地址映射
   * 注意： 通常页内地址 是不会改变的，例如：页号是 1，页内地址是f11，页号1对应物理块号 5，那么物理地址就是5f11
2. 页表寄存器
   为了实现地址转换，在系统中设置页表寄存器，用来存放页表的起始地址和页表的长度L，当进行地址转换时，如果被转换虚拟地址的页号S > L，则访问越界中断。
3. 快表
   * 页表地址映射：  第一次访问内存页表，取出物理地址，第二次去内存物理地址取数据。 访问两次主存
   * 快表地址映射：  第一次访问cache（多级cache）快表，取出物理地址，第二次去内存物理地址取数据。 访问一次cache ，一次主存 （更快）
4. 二级页表
   * 将页表再分分页存储，我们叫做目录。节省空间

### 分段存储管理